# OBJ to Tetrahedron Mesh Toolchain
A toolchain for automating the conversion of OBJ models to tetrahedron meshes (TET format), integrating the full workflow of OBJ‚ÜíPLY format conversion, tetrahedral meshing (based on tetgen), and NODE/ELE‚ÜíTET format conversion.

---

## üì¶ Tool Components
| Tool Name | Function | Core Dependencies |
|-----------|----------|-------------------|
| `obj2ply.exe` | Convert OBJ models to tetgen-compatible ASCII-format PLY files | trimesh (Python) |
| `tetgen.exe` | Mesh PLY files into tetrahedral grids and generate `.node`/`.ele` files | [tetgen 1.5.1](https://wias-berlin.de/software/tetgen/) (AGPL v3) |
| `nodele2tet.exe` | Merge tetgen-generated `.node`/`.ele` files into custom TET format files | Self-developed C++ program |
| `obj2tet.exe` | Execute the full "OBJ‚ÜíPLY‚ÜíNODE/ELE‚ÜíTET" workflow in one click | All tools above |

---

## üöÄ Quick Start
### 1. One-Click Full Workflow Conversion (Recommended)
Automate all steps with `obj2tet.exe` without manually invoking multiple tools:
```bash
# Basic usage: default maximum tetrahedron volume 0.001, no intermediate files retained
obj2tet example.obj

# Custom parameters: specify max volume 0.0005 and retain intermediate files (PLY/NODE/ELE)
obj2tet example.obj 0.0005 1
```
Parameter Explanation:
- `input.obj`: Path to the input OBJ model file
- `0.001` (optional): Maximum volume of tetrahedrons (default 0.001; smaller values yield denser meshes)
- `1` (optional): Whether to retain intermediate files (`1` = retain, default = not retain)

---

### 2. Step-by-Step Manual Conversion (Debugging/Customization Scenarios)
#### ‚ë† Convert OBJ to PLY
```bash
obj2ply example.obj example.ply
```
- Outputs ASCII-format PLY files to ensure compatibility with tetgen

#### ‚ë° Mesh PLY to NODE/ELE
```bash
tetgen -pqO -a0.001 example.ply
```
- `-pqO`: Generate high-quality, optimized tetrahedral meshes
- `-a0.001`: Limit the maximum volume of each tetrahedron to 0.001
- Generated files: `example.1.node`, `example.1.ele` (tetgen's default naming convention)

#### ‚ë¢ Convert NODE/ELE to TET
```bash
# 0-based index (use -0 when converting tetgen's 1-based indices to 0-based)
nodele2tet -0 example.1.node example.1.ele example.tet

# 1-based index (use -1 to directly use tetgen's original 1-based indices)
nodele2tet -1 example.1.node example.1.ele example.tet
```
Parameter Explanation:
- `-0`/`-1`: Index base of input files (0-based / 1-based)
- `input.node`/`input.ele`: Node/tetrahedron files generated by tetgen
- `output.tet`: Output TET format file

---

## üìú Compliance Statement for Third-Party Components (tetgen)
This toolchain includes the third-party component **tetgen 1.5.1** (Original Author: Hang Si, Official Website: https://wias-berlin.de/software/tetgen/), which is licensed under the **GNU Affero General Public License (AGPL) v3**. To comply with the license requirements, we have taken the following measures:
1. **Source Code Integrity**: The `tetgen1.5.1` folder in the project root directory contains the complete original source code of tetgen and the compiled `tetgen.exe`;
2. **Source Attribution**: Clearly state tetgen's original author, official address, and license type;
3. **Distribution Obligation**: Any user obtaining this toolchain can access the tetgen source code via the `tetgen1.5.1` folder or download the latest version from the official address;
4. **Derivative Work Statement**: This toolchain only invokes the binary file of tetgen and does not modify the tetgen source code. If you modify the tetgen source code and recompile it, you must open-source the modified code in compliance with the AGPL v3 license.

---

## üõ†Ô∏è Deployment Instructions
1. Place all tools (`obj2ply.exe`, `tetgen.exe`, `nodele2tet.exe`, `obj2tet.exe`) in the **same directory**, or add them to the system `PATH` environment variable;
2. Ensure the `tetgen1.5.1` folder is in the same directory as the tool executables to meet the source code access requirements of AGPL v3;
3. To modify the tool source code, edit the corresponding `.cpp`/`.py` files and recompile directly.

---

## üìÑ Open Source Licenses
### Self-Developed Code (obj2ply.py, nodele2tet.cpp, obj2tet.cpp)
Licensed under the **MIT License**. You are free to use, modify, and distribute the code without the obligation to open-source modified versions, provided that the original author's copyright notice is retained.

### Third-Party Component (tetgen 1.5.1)
Licensed under the **GNU AGPL v3 License**. The full license text is available in `tetgen1.5.1/LICENSE`.

---

## üéØ Frequently Asked Questions (FAQ)
### Q: Why is obj2ply.exe large in size?
A: obj2ply is packaged with Python + trimesh and includes a complete Python runtime. To reduce the size, repackage it with only necessary dependencies (see the packaging optimization instructions in the project documentation).

### Q: Why do tetgen-generated files have a `.1` suffix?
A: This is tetgen's default naming convention (indicating the 1st meshing iteration). `obj2tet.exe` automatically renames them to `.node`/`.ele` to adapt to the input requirements of `nodele2tet.exe`.

### Q: How to ensure compliance with the AGPL v3 license?
A: As long as you do not modify the tetgen source code, only distribute the binary files of this toolchain, and retain the source code in the `tetgen1.5.1` folder, you comply with the license requirements. If you modify the tetgen source code, you must open-source the modified code.

---

## üìû Feedback and Contributions
If you encounter issues or have improvement suggestions, please submit an Issue or Pull Request.

---
*This toolchain is intended for academic/open-source projects only. For commercial use, please independently evaluate compliance with the tetgen AGPL v3 license.*